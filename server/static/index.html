<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Remote AI - Voice Control</title>
        <link rel="stylesheet" href="/static/styles.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/annyang/2.6.1/annyang.min.js"></script>
    </head>
    <body>
        <div class="main-container">
            <!-- Left: Analysis Panel -->
            <div class="analysis-panel">
                <h2 class="panel-title">Analysis</h2>
                <div class="analysis-content">
                    <div class="analysis-section">
                        <h3 class="section-label">Model Selection</h3>
                        <div id="modelInfo" class="info-display"></div>
                    </div>

                    <div class="analysis-section">
                        <h3 class="section-label">Task Complexity</h3>
                        <div id="complexityInfo" class="info-display"></div>
                    </div>

                    <div class="analysis-section">
                        <h3 class="section-label">Tool Calls</h3>
                        <div id="toolCalls" class="tool-calls-list"></div>
                    </div>
                </div>
            </div>

            <!-- Center: Video -->
            <div class="center-panel">
                <div class="video-container">
                    <iframe 
                        id="stream" 
                        src="" 
                        allow="autoplay; fullscreen; picture-in-picture"
                        allowfullscreen
                        title="Screen Stream"
                    ></iframe>
                </div>

                <div class="controls">
                    <div class="text-input-container">
                        <button
                            id="voiceBtn"
                            class="voice-button"
                            title="Click to toggle voice input"
                        >
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                                <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                                <line x1="12" y1="19" x2="12" y2="23"></line>
                                <line x1="8" y1="23" x2="16" y2="23"></line>
                            </svg>
                        </button>
                        <input
                            type="text"
                            id="textInput"
                            placeholder="Type your command..."
                            class="text-input"
                        />
                        <button id="sendBtn" class="send-button">Send</button>
                    </div>
                </div>

                <div id="error" class="error"></div>
            </div>

            <!-- Right: Chat History -->
            <div class="chat-panel">
                <h2 class="panel-title">Chat History</h2>
                <div id="chatHistory" class="chat-history">
                    <div class="empty-state">Start a conversation...</div>
                </div>
            </div>
        </div>

        <div id="commandNotification" class="command-notification">
            <div class="spinner"></div>
            <div>
                <div class="command-label">Processing</div>
                <div class="command-text" id="commandText"></div>
            </div>
        </div>

        <script src="/static/app.js"></script>
    </body>
</html>
